{
  "fileName": "BalanceInfo.scala",
  "filePath": "src/main/scala/org/ergoplatform/nodeView/history/extra/BalanceInfo.scala",
  "url": "https://github.com/ergoplatform/ergo/src/main/scala/org/ergoplatform/nodeView/history/extra/BalanceInfo.scala",
  "summary": "The `BalanceInfo` class is used to track the ERG and token balances in an `IndexedErgoAddress`. It contains a `nanoErgs` variable to store the balance in nanoERGs and a `tokens` variable to store the balance of each token. The `tokens` variable is an `ArrayBuffer` of tuples, where the first element is the token's `ModifierId` and the second element is the balance of the token.\n\nThe class also has a `mutable.HashMap` called `additionalTokenInfo` to store additional information about each token, such as its name and number of decimals. This information is retrieved from the database using the `retrieveAdditionalTokenInfo` method, which takes an `ErgoHistoryReader` as input and returns the `BalanceInfo` object.\n\nThe `add` method is used to record an address receiving a box. It takes an `ErgoBox` as input and updates the `nanoErgs` and `tokens` variables accordingly. If the token already exists in the `tokens` variable, its balance is updated. Otherwise, a new tuple is added to the `tokens` variable.\n\nThe `subtract` method is used to record an address spending a box. It takes an `ErgoBox` as input and updates the `nanoErgs` and `tokens` variables accordingly. If the token already exists in the `tokens` variable, its balance is updated. If the new balance is zero, the tuple is removed from the `tokens` variable. If the token does not exist in the `tokens` variable, a warning message is logged.\n\nThe `BalanceInfoSerializer` object is used to serialize and deserialize `BalanceInfo` objects. It implements the `ScorexSerializer` trait and provides methods to serialize a `BalanceInfo` object to a `Writer` and parse a `BalanceInfo` object from a `Reader`. The `serialize` method writes the `nanoErgs` and `tokens` variables to the `Writer`, while the `parse` method reads the `nanoErgs` and `tokens` variables from the `Reader` and returns a new `BalanceInfo` object.\n\nOverall, the `BalanceInfo` class is an important component of the `ergo` project, as it provides a way to track the balances of ERG and tokens in an `IndexedErgoAddress`. It can be used to implement various features, such as a wallet or an explorer, that require knowledge of the balances of addresses.",
  "questions": "1. What is the purpose of the `BalanceInfo` class?\n- The `BalanceInfo` class tracks the ERG and token balances in `IndexedErgoAddress`.\n\n2. What is the `retreiveAdditionalTokenInfo` method used for?\n- The `retreiveAdditionalTokenInfo` method is used to get full token information from the database.\n\n3. What is the purpose of the `BalanceInfoSerializer` object?\n- The `BalanceInfoSerializer` object is used to serialize and parse `BalanceInfo` objects."
}